# Инструкция по деплою на Render.com

## Быстрый старт

1. **Создайте аккаунт на Render.com** (если еще нет)

2. **Создайте новый Web Service:**
   - Нажмите "New" → "Web Service"
   - Выберите "Docker" как тип сервиса
   - Подключите ваш Git репозиторий (GitHub, GitLab, Bitbucket)

3. **Настройки сервиса:**
   - **Name**: `steam-analytics-worker` (или любое другое)
   - **Region**: Выберите ближайший регион
   - **Branch**: `main` (или ваша основная ветка)
   - **Root Directory**: (оставьте пустым, если проект в корне)
   - **Environment**: `Docker`
   - **Dockerfile Path**: `Dockerfile` (если в корне)
   - **Docker Context**: `.` (текущая директория)

4. **Настройки ресурсов:**
   - **Instance Type**: `Starter` (0.1 CPU, 512 MB RAM)
   - **Auto-Deploy**: `Yes` (автоматический деплой при push)

5. **Переменные окружения** (опционально):
   - `ASPNETCORE_ENVIRONMENT=Production`
   - `DOTNET_GCHeapHardLimit=400000000`

6. **Health Check:**
   - **Health Check Path**: `/health`

7. **Нажмите "Create Web Service"**

## После деплоя

1. Дождитесь завершения сборки (обычно 5-10 минут)
2. Откройте ваш сервис по URL, который предоставит Render
3. Добавьте предметы для отслеживания через веб-интерфейс

## Проверка работы

- Откройте `/health` - должен вернуть `{"status":"healthy"}`
- Откройте главную страницу - должен отобразиться веб-интерфейс
- Проверьте логи в панели Render - должны быть записи о запуске Worker

## Важные замечания

- **База данных**: SQLite файл хранится в `/app/data/steam_analytics.db` внутри контейнера
- **Персистентность**: При перезапуске контейнера данные сохраняются (если используется Persistent Disk)
- **Ограничения ресурсов**: Приложение оптимизировано для работы с 0.1 CPU и 512 MB RAM
- **Автоматический сбор**: Данные собираются каждый час автоматически

## Troubleshooting

### Проблема: Приложение не запускается
- Проверьте логи в панели Render
- Убедитесь, что Dockerfile корректен
- Проверьте, что все зависимости установлены

### Проблема: База данных не сохраняется
- Убедитесь, что используется Persistent Disk (если доступно)
- Или настройте внешнюю БД (PostgreSQL на Render)

### Проблема: Недостаточно памяти
- Уменьшите количество отслеживаемых предметов
- Увеличьте лимит RAM в настройках Render (если возможно)

